!function(e){"use strict";function a(e){localStorage.hyResources=JSON.stringify([])}function r(e,a){function r(){return JSON.parse(localStorage.hyResources)}function t(e,a,t){var s=r(),d=u;t&&(d=t),d.name=e,d.resource=a,s.push(d),localStorage.hyResources=JSON.stringify(s)}function s(e){var a=r(),t=n(e);t>-1&&a.splice(t,1),localStorage.hyResources=JSON.stringify(a)}function d(e){for(var a=r(),t=0;t<a.length;t++)if(a[t].name==e)return a[t]}function n(e){for(var a=r(),t=0;t<a.length;t++)if(a[t].name==e)return t}function o(a){var r=d(a),t=e(r.resource+"/:id",{id:"@"+r.extra.defaultId},{get:{method:r.GetParams.Method,headers:r.GetParams.headers,isArray:!1},query:{method:r.GetParams.Method,headers:r.GetParams.headers,isArray:r.GetParams.IsArray},save:{method:r.AddParams.Method,headers:r.AddParams.headers,isArray:r.AddParams.IsArray},update:{method:r.UpdateParams.Method,headers:r.UpdateParams.headers,isArray:r.UpdateParams.IsArray},delete:{method:r.DeleteParams.Method,headers:r.DeleteParams.headers,isArray:r.DeleteParams.IsArray}});return t}var u={GetParams:{headers:{"Content-Type":"application/json"},Method:"GET",IsArray:!0},AddParams:{headers:{"Content-Type":"application/json"},Method:"POST",IsArray:!1},UpdateParams:{headers:{"Content-Type":"application/json"},Method:"PUT",IsArray:!1},DeleteParams:{headers:{"Content-Type":"application/json"},Method:"DELETE",IsArray:!1},extra:{defaultId:"id"}};this.addResource=function(e,a,r){t(e,a,r)},this.get=function(e,a){var r=o(e);return a?r.get({id:a}).$promise:r.query().$promise},this.add=function(e,a){var r=o(e),t=new r(a);return t.$save()},this.update=function(e,a){var r=o(e),t=new r(a);return t.$update()},this.delete=function(e,r){var t=d(e),s=t.resource;r[t.extra.defaultId]&&(s=s+"/"+r[t.extra.defaultId]);var n={method:t.DeleteParams.Method,url:s,headers:t.DeleteParams.headers,data:r};return a(n)},this.configResource=function(e){var a=d(e),r={};return r.method=function(e){var r={};return r.isArray=function(r){s(a.name),"get"==e&&(a.GetParams.IsArray=r),"add"==e&&(a.AddParams.IsArray=r),"update"==e&&(a.UpdateParams.IsArray=r),"delete"==e&&(a.DeleteParams.IsArray=r),t(a.name,a.resource,a)},r.addHeader=function(r,d){s(a.name),"get"==e&&(a.GetParams.headers[r]=d),"add"==e&&(a.AddParams.headers[r]=d),"update"==e&&(a.UpdateParams.headers[r]=d),"delete"==e&&(a.DeleteParams.headers[r]=d),t(a.name,a.resource,a)},r.removeHeader=function(r){s(a.name),"get"==e&&delete a.GetParams.headers[r],"add"==e&&delete a.AddParams.headers[r],"update"==e&&delete a.UpdateParams.headers[r],"delete"==e&&delete a.DeleteParams.headers[r],t(a.name,a.resource,a)},r},r.changeUrl=function(e){s(a.name),t(a.name,e,a)},r.defaultId=function(e){s(a.name),a.extra.defaultId=e,t(a.name,a.resource,a)},r}}a.$inject=["hyResources"],e.module("hyResources",["ngResource"]).run(a),r.$inject=["$resource","$http"],e.module("hyResources").service("hyResources",r)}(angular);